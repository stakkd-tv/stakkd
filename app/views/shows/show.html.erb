<% content_for :title, "Stakkd - #{@show.translated_title}" %>

<%= render "shared/colour_from_image", image: @show.poster %>

<% if @show.background %>
  <div class="absolute -z-10 w-full h-96 overflow-hidden flex items-center justify-center">
    <%= image_tag @show.background, class: "w-full min-h-96 object-cover blur-xs" %>
    <div class="absolute w-full h-full bg-gradient-to-t from-background to-background/35"></div>
  </div>
<% end %>

<div class="max-w-7xl mx-auto my-8 px-6 pt-10">
  <div class="grid grid-cols-1 md:grid-cols-4 md:gap-8 md:min-h-screen">
    <div class="col-span-1 bg-background-darker rounded-lg p-4 flex flex-col gap-10 items-center md:items-start">
      <%= image_tag @show.poster, class: "max-h-40 w-fit md:w-full md:max-h-none rounded-lg" %>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-1 gap-10">
        <div>
          <p class="font-domine"><b>Status:</b></p>
          <p><%= @show.status.titleize %></p>
        </div>
        <div>
          <p class="font-domine"><b>Type:</b></p>
          <p><%= @show.type.titleize %></p>
        </div>
        <% if @show.runtime.present? %>
          <div>
            <p class="font-domine"><b>Runtime:</b></p>
            <p><%= @show.runtime %> minutes</p>
          </div>
        <% end %>
      </div>
      <% if @show.companies.any? %>
        <div class="grid grid-cols-5 gap-2">
          <% @show.companies.each do |company| %>
            <%= link_to company do %>
              <%= image_tag company.logo, alt: company.name, title: company.name, class: "bg-pop/25 rounded-lg border border-pop aspect-square" %>
            <% end %>
          <% end %>
        </div>
      <% end %>
      <div class="flex gap-4 flex-col w-full">
        <%= link_to "Edit", edit_show_path(@show), class: "link" %>
        <div class="flex gap-4 w-full">
        <% if @show.homepage.present? %>
          <%= link_to @show.homepage, class: "link link-flex justify-center w-full" do %>
            <i class="fa-solid fa-globe text-2xl"></i>
          <% end %>
        <% end %>
        <%= link_to @show.imdb_url, class: "link link-imdb w-full" do %>
          <i class="fa-brands fa-imdb text-4xl"></i>
        <% end %>
        </div>
      </div>
    </div>

    <div class="col-span-3 flex flex-col gap-10">
      <div>
        <h3 class="text-4xl font-bold font-domine text-white mt-10 md:mt-4">
          <i class="fa-solid fa-tv text-4xl mr-6"></i>
          <%= @show.translated_title %>
        </h3>
        <% if @show.genres.any? %>
          <div class="flex gap-3 flex-wrap mt-4">
            <% @show.genres.each do |genre| %>
              <%= link_to genre.name, shows_path(genre_ids: [genre.id]), class: "rounded-full bg-pop/65 px-3 py-1 text-sm border-2 border-pop" %>
            <% end %>
          </div>
        <% end %>
        <% if @show.tagline %>
          <p class="text-sm mt-4 italic"><%= @show.tagline %></p>
        <% end %>
      </div>
      <div class="leading-[1.5rem] text-sm md:text-base flex flex-col gap-6">
        <%= simple_format @show.overview %>
      </div>

      <%= render "shared/alternative_names", names_grouped_by_country: @alternative_names %>

      <%#= render "shared/galleries", presenter: @gallery_presenter %>

      <div class="flex flex-wrap gap-2">
        <% @show.keywords.each do |keyword| %>
          <small class="rounded-lg bg-pop/50 px-3 py-1 text-sm border border-pop"><%= keyword %></small>
        <% end %>
      </div>
    </div>
  </div>
</div>
